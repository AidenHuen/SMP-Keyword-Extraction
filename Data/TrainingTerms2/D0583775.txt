#Java/gi实现/gi附近/f地点搜索/gi
java/gi,/nzmysql/gi-/nz根据/p一个/mq给定/gi经纬度/gi的/ude1点/gi，/w进行/vn附近/f500/nz米/q地点/n查询/giC/nz合理/a利用/v算法/gi最近/t做/v一个/mq项目/gi：/w需要/v查询/gi一个/mq站点/gi（/w已知/nz该/rz站点/gi经纬度/gi）/w1/nzkm/nz-/nz10/nzkm/nz范围内/nz的/ude1其它/rz站点/gi。/w所以/c，/w我/rr首先/d想到/v的/ude1是/vshi，/w对/p每条/d记录/gi，/w去/vf进行/vn遍历/gi，/w跟/p数据库/gi中的/v每一个/nz点/gi进行/vn距离/gi计算/gi，/w当/p距离/gi小于/v10/nzkm/nz时/qt，/w认为/v匹配/gi。/w这样/rzv做/v确实/ad能够/v得到/v结果/n，/w但是/c效率/gi极其/d低下/a，/w因为/c每条/d记录/gi都/d要/v去/vf循环/gi匹配/gin/nz条/q数据/gi，/w其/rz消耗/gi的/ude1时间/gi可想而知/vl。/w于是/cc我/rr就/d想到/v一个/mq先/d过滤/gi出/vf大概/d的/ude1经纬度/gi范围/n再/d进行/vn计算/gi。/w比方说/l正方形/n的/ude1四个点/nz，/w于是/cc我/rr在/p网上/s搜索/gi，/w意外/a的/ude1，/w查询/gi到/v了/ule一个/mq关于/p这个/rz，/w里面/f使用/gipython/gi实现/gi了/ule这个/rz想法/gi。/w所以/c参考/gi了/ule一/nz下/f原文/n中的/v算法/gi，/w使用/gijava/gi进行/vn了/ule实现/gi。/w原理/gi实现/gi原理/gi也/d是/vshi很/d相/d的/ude1，/w先/d算出/vf该/rz点/gi周围/f的/ude1矩形/gi的/ude1四个点/nz，/w然后/c使用/gi经纬度/gi去/vf直接/ad匹配/gi数据库/gi中的/v记录/gi。/w思路/gi思路/gi：/w首先/d算出/vf“/w给定/gi坐标/gi附近/f1000/nz米/q”/w这个/rz范围/n的/ude1坐标/gi范围/n。/w虽然/c它/rr是/vshi个/q圆/v，/w但/c我们/rr可以/v先/d求出/v该/rz圆/v的/ude1外接/gm正方形/n，/w然后/c拿/v正方形/n的/ude1经纬度/gi范围/n去/vf搜索/gi数据库/gi。/w红色/gi部分/n为/p要求/n的/ude1搜索/gi范围/n，/w绿色/n部分/n我们/rr能/v间接/b得到/v的/ude1结果/n范围/n先/d来/vf求/v东西/n两侧/f的/ude1的/ude1范围/n边界/n。/w在/phaversin/nz公式/gi中/f令/vφ/nz1/nz=/nzφ/nz2。/nzjava实现/gi