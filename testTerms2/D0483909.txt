#主从复制/gi，/w读写/gi分离/vi
一个/mq简单/a完整/a的/ude1 mysql /nz主从复制/gi，/w读写/gi分离/vi的/ude1示意图/gi。/w1./nz /x首先/d搭建/v mysql /nz主从/gi架构/gi，/w实现/gi /x将/d mater /nz数据/gi自动/d复制到/v slavemysql /nz复制/gi的/ude1工作方式/gi很/d简单/a，/w一台/nz服务器/gi作为/p主机/gi，/w一台/nz或/c多/a台/q服务器/gi作为/p从机/nz。/w主/ag机会/gi把/pba数据库/gi的/ude1变化/gi记录/gi到/v日志/gi。/w一旦/d这些/rz变化/gi被/pbei记录/gi到/v日志/gi，/w就/d会/v立刻/d（/w或者/c以/p设定/v的/ude1时间/gi间隔/n）/w被/pbei送到/v从/p机/ng。/w使用/gimysql /nz复制/gi提供/v扩展/gi大型网站/gi的/ude1能力/gi，/w这些/rz大型网站/gi的/ude1数据库/gi主要/b是/vshi读/v操作/gi(/nzselects/nz)/nz。/w从/p机/ng用於/nz复制/gi主机/gi的/ude1Nm/nz是/vshi很少/ad的/ude1（/w通常/d每个/r从/p机/ng1%/nz的/ude1开销/n）/w，/w在/p大型网站/gi中/f每个/r主机/gi部署/gi30/nz /x个/q从/p机/ng也/d是/vshi常见/a的/ude1。/w异步/gi复制/gi与/cc同步/gi复制/gi异步/gi复制/gi：/wmysql/gi本身/rz支持/v单向/b的/ude1、/w异步/gi的/ude1复制/gi。/w异步/gi复制/gi意味着/v在/p把/pba数据/gi从/p一台/nz机器/gi拷贝到/nz另一台/nz机器/gi时/qt有一个/nz延时/v /xC/nz /x最重要/nz的/ude1是/vshi这/rzv意味着/v当/p应用系统/gi的/ude1事务/gi提交/gi已经/d确认/v时/qt数据/gi并/cc不能/v在/p同一/b时刻/n拷贝/gi//nz应用/gi到/v从/p机/ng。/w通常/d这个/rz延时/v是/vshi由/p网络带宽/gi、/w资源/gi可用性/gi和/cc系统/gi负载/gi决定/v的/ude1。/w然而/c，/w使用/gi正确/a的/ude1组件/gi并且/c调优/gi，/w复制/gi能/v做到/v接近/v瞬时/t完成/v。/w同步/gi复制/gi：/w同步/gi复制/gi可以/v定义/gi为/p数据/gi在/p同一/b时刻/n被/pbei提交/gi到/v一台/nz或/c多/a台/q机器/gi，/w通常/d这/rzv是/vshi通过/p众所周知/vl的/ude1“/w两/nz阶段/gi提交/gi”/w做到/v的/ude1。/w虽然/c这/rzv确实/ad给/p你/rr在/p多/a系统/gi中/f保持/v一致性/gi，/w但/c也/d由于/p增加/v了/ule额外/b的/ude1消息/n交换/gi而/cc造成/v性能/gi下降/vi。/w使用/gimyisam/gi或者/cinnodb/gi存储引擎/gi的/ude1mysql/gi本身/rz并不/d支持/v同步/gi复制/gi，/w然而/c有些/rz技术/gi，/w例如/v分布式/gi复制/gi块/q设备/gi（/w简称/vdrbd/nz）/w，/w可以/v在/p下层/f的/ude1文件系统/gi提供/v同步/gi复制/gi，/w允许/v第二个/nzmysql/gi服务器/gi在/p主/ag服务器/gi丢失/v的/ude1情况下/nz接管/v（/w使用/gi第二/mq服务器/gi的/ude1复本/n）/w。/w要/v了解/v更多/ad信息/gi，/w请/v参见/v：/w