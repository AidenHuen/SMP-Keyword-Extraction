#进程/gi和/cc线程/gi之间/f的/ude1区别/gi
任务/gi（/wtask/nz）/w /x是/vshi最/d抽象/gi的/ude1,/nz是/vshi一个/mq一般性/n的/ude1术语/gi,/nz指/v由/p软件/gi完成/v的/ude1一个/mq活动/gi。/w一个/mq任务/gi既/c可以/v是/vshi一个/mq进程/gi,/nz也/d可以/v是/vshi一个/mq线程/gi。/w简而言之/vl,/nz它/rr指/v的/ude1是/vshi一系列/b共同/d达到/v某/rz一目/nz的/ude1的/ude1操/v /x作/v。/w例如/v,/nz读取数据/n并/cc将/d数据/gi放入/v内存/gi中/f。/w这个/rz任务/gi可以/v作为/p一个/mq进程/gi来/vf实现/gi,/nz也/d可以/v作为/p一个/mq线程/gi来/vf实现/gi。/w　　/nz进程/gi（/wprocess/nz）/w常常/d被/pbei定义/gi为/p程序/gi的/ude1执行/v。/w可以/v把/pba一个/mq进程/gi看成/v是/vshi一个/mq独立/a的/ude1程序/gi,/nz在/p内存/gi中/f有/vyou其/rz完备/a的/ude1数据/gi空间/n和/cc代码/gi空间/n。/w一个/mq进程/gi所/usuo拥有/v的/ude1数据/gi和/cc变量/gi只/d属于/v它/rr自己/rr。/w　　/nz线程/gi（/wthread/nz）/w则/d是/vshi某/rz一/nz进程/gi中一路/ns单独/d运行/gi的/ude1程序/gi。/w也/d就是说/c,/nz线程/gi存在/v于/p进程/gi之中/f。/w一个/mq进程/gi由/p一个/mq或/c多/a个/q线程/gi构成/v,/nz各/rz线程/gi共享/gi相同/a的/ude1代码/gi和/cc全局/n数据/gi,/nz但/c各/rz有/vyou其/rz自己/rr的/ude1堆栈/n。/w由于/p堆栈/n是/vshi每个/r线程/gi一个/mq,/nz所以/c局部/n变量/gi对/p每/rz一线程/nz来说/uls是/vshi私有/gi的/ude1。/w由于/p所有/b线程/gi共享/gi同样/d的/ude1代码/gi和/cc全局/n数据/gi,/nz它们/rr比/p进程/gi更/d紧密/ad,/nz比/p单独/d的/ude1进程/gi间/f更/d趋向于/n相互作用/n,/nz线程/gi间/f的/ude1相互作用/n更容易/nz些/q,/nz因为/c它们/rr本身/rz就/d有/vyou某些/rz供通/nz信用/gi的/ude1共享内存/nz：/w进程/gi的/ude1全局/n数据/gi。/w　　/nz一个/mq进程/gi和/cc一个/mq线程/gi最/d显著/ad的/ude1区别/gi是/vshi：/w线程/gi共享/gi进程/gi的/ude1全局/n数据/gi。/w线程/gi存在/v于/p进程/gi中/f,/nz因此/c一个/mq进程/gi的/ude1全局变量/gi由/p所有/b的/ude1线程/gi共享/gi。/w由于/p线程/gi共享/gi同样/d的/ude1系统/gi区域/n,/nz操作系统/gi分配/gi给/p一个/mq进程/gi的/ude1资源/gi对/p该/rz进程/gi的/ude1所有/b线程/gi都/d是/vshi可用/v的/ude1,/nz正如/v全局/n数据/gi可供/v所有/b线程/gi使用/gi一样/uyy。/w简而言之/vl,/nz一个/mq程序/gi至少/d有/vyou一个/mq进程/gi,/nz一个/mq进程/gi至少/d有/vyou一个/mq线程/gi。/w线程/gi的/ude1划分/v尺度/n小于/v进程/gi，/w使得/vi多/a线/n程程序/nz的/ude1并发性/nz高/a。/w另外/c，/w进程/gi在/p执行/v过程/gi中/f拥有/v独立/a的/ude1内存/gi单元/n，/w而/cc多/a个/q线程/gi共享内存/nz，/w从而/c极大地提高/i了/ule程序/gi的/ude1运行/gi效率/gi。/w线程/gi在/p执行/v过程/gi中/f与/cc进程/gi还是/c有区别/nz的/ude1。/w每个/r独立/a的/ude1线程/gi有/vyou一个/mq程序运行/n的/ude1入口/n、/w顺序/gi执行/v序列/gi和/cc程序/gi的/ude1出口/vn。/w但是/c线程/gi不/d能够/v独立/a执行/v，/w必须/d依/v存在/v应用程序/nz中/f，/w由/p应用程序/nz提供/v多/a个/q线程/gi执行/v控制/vn。/w从/p逻辑/n角度/n来看/u，/w多线程/gi的/ude1意义/n在于/v一个/mq应用程序/nz中/f，/w由/p多/a个/q执行/v部分/n可以/v同时/c执行/v。/w但/c操作系统/gi并/cc没有/v将/d多/a个/q线程/gi看做/v多/a个/q独立/a的/ude1应用/gi，/w来/vf实现/gi调度/vn和/cc管理/gi以及/cc资源分配/gi，/w这/rzv就是/v进程/gi和/cc线程/gi的/ude1重要/a区别。一个/nz线程/gi可以/v创建/gi和/cc撤销/v另一个/nz线程/gi;/nz同一个/b进程/gi中的/v多/a个/q线程/gi之间/f可以/v并发/gi执行/v。/w进程/gi和/cc线程/gi的/ude1主要/b差别/n在于/v它们/rr是/vshi不同/a的/ude1操作系统/gi资源/gi管理/gi方式/n。/w进程/gi有/vyou独立/a的/ude1地址/gi空间/n，/w一个/mq进程/gi崩溃/vi后/f，/w在/p保护模式/nz下/f不会/v对/p其它/rz进程/gi产生/v影响/gi，/w而/cc线程/gi只是/d一/nz /x个/q进程/gi中的/v不同/a执行/v路径/gi。/w线程/gi有/vyou自己/rr的/ude1堆栈/n和/cc局部/n变量/gi，/w但/c线程/gi之间/f没有/v单独/d的/ude1地址/gi空间/n，/w一个/mq线程/gi死掉/nz就/d等于/v整个/b进程/gi死掉/nz，/w所以/c多/a进程/gi的/ude1程序/gi要/v比/p多线程/gi的/ude1程/n /x序/n健壮/a，/w但/c在/p进程/gi切换/vn时/qt，/w耗费/v资源/gi较大/d，/w效率/gi要/v差/a一/nz些/q。/w但/c对于/p一/nz些/q要求/n同时/c进行/vn并且/c又/d要/v共享/gi某些/rz变量/gi的/ude1并发/gi操作/gi，/w只能/v用/p线程/gi，/w不能/v用/p进程/gi。/w进程/gi概念/gi　　/nz /x进程/gi是/vshi表示/v资源分配/gi的/ude1基本单位/gm，/w又是/c调度/vn运行/gi的/ude1基本单位/gm。/w例如/v，/w用户/gi运行/gi自己/rr的/ude1程序/gi，/w系统/gi就/d创建/gi一个/mq进程/gi，/w并为/c它/rr分配资源/n，/w包括/v各种/rz表/n、/w内存空间/nz、/w磁盘/gi /x空间/n、/wi/nz／/wo/nz设备/gi等/udeng。/w然后/c，/w把/pba该/rz进程/gi放/v人/n进程/gi的/ude1就绪/vi队列/gi。/w进程调度/gi程序/gi选中/v它/rr，/w为/p它/rr分配/gicpu/gi以及/cc其它/rz有关/vn资源/gi，/w该/rz进程/gi才/d真正/d运行/gi。/w所以/c，/w进程/gi是/vshi系统/gi中的/v /x并发/gi执行/v的/ude1单位/n。/w在/pmac/gi、/wwindows nt/nz等/udeng采用/v微内核/gi结构/gi的/ude1操作系统/gi中/f，/w进程/gi的/ude1功能/gi发生/v了/ule变化/gi：/w它/rr只是/d资源分配/gi的/ude1单位/n，/w而/cc不再/d是/vshi调度/vn运行/gi的/ude1单位/n。/w在/p微内核/gi系统/gi中/f，/w真正/d调度/vn运行/gi的/ude1基本单位/gm是/vshi线程/gi。/w因此/c，/w实现/gi并发/gi功能/gi的/ude1单位/n是/vshi线程/gi。/w（/w注意/v，/w是否是/lcpu/gi调度/vn运行/gi的/ude1基本单位/gm，/w在/p不同/a系统/gi中/f是/vshi不/d一样/uyy的/ude1。/w）/w线程/gi概念/gi　　/nz线程/gi是/vshi进程/gi中/f执行/v运算/gi的/ude1最小/a单位/n，/w亦/d即/v执行/v处理机/gi调度/vn的/ude1基本单位/gm。/w如果/c把/pba进程/gi理解/gi为/p在/p逻辑上/nz操作系统/gi所/usuo完成/v的/ude1任务/gi，/w那么/c线程/gi表示/v完成/v该/rz任务/gi的/ude1许多可能/nz的/ude1子/ng任务/gi之一/rz。/w例如/v，/w假设/gi用户/gi启动/gi了/ule一个/mq窗口/s中的/v数据库/gi应用程序/nz，/w操作系统/gi就/d将/d对/p数据库/gi的/ude1调用/gi表示/v为/p一个/mq进程/gi。/w假设/gi用户/gi要/v从/p数据库/gi中/f产生/v一份/nz工资单/n报表/gi，/w并/cc传到/v一个/mq文件/gi中/f，/w这/rzv是/vshi一个子/nz任务/gi；/w在/p产生/v工资单/n报表/gi的/ude1过程/gi中/f，/w用户/gi又/d可以/v输人/n数据库/gi查询/gi请求/gi，/w这/rzv又是/c一个子/nz任务/gi。/w这样/rzv，/w操作系统/gi则/d把/pba每一个/nz请求/giD/nzD/nz工资单/n报表/gi和/cc新/a输人/n的/ude1数据/gi查询/gi表示/v为/p数据库/gi进程/gi中的/v独立/a的/ude1线程/gi。/w /x线程/gi可以/v在/p处理器/gi上/f独立/a调度/vn执行/v，/w这样/rzv，/w在/p多处理器/l环境/n下/f就/d允许/v几/d个/q线程/gi各自/rr在/p单独/d处理器/gi上/f进行/vn。/w操作系统/gi提供/v线程/gi就是/v为了/p方便/a而/cc有效地/nz实现/gi这种/r并发性/nz。/w引入/v线程/gi的/ude1好处/gi（/w1/nz）/w易于/vd调度/vn。/w（/w2/nz）/w提高/v并发性/nz。/w通过/p线程/gi可/v方便/a有效地/nz实现/gi并发性/nz。/w进程/gi可/v创建/gi多/a个/q线程/gi来/vf执行/v同一/b程序/gi的/ude1不同/a部分/n。/w（/w3/nz）/w开销/n少/a。/w创建/gi线程/gi比/p创建/gi进程/gi要/v快/a，/w所需/nz开销/n很少/ad。/w（/w4/nz）/w利于/v充分发挥/nz多处理器/l的/ude1功能/gi。/w通过/p创建/gi多线程/gi进程/gi（/w即/v一个/mq进程/gi可/v具有/v两/nz个/q或/c更多/ad个/q线程/gi）/w，/w每个/r线程/gi在/p一个/mq处理器/gi上/f运行/gi，/w从而/c实现/gi应用程序/nz的/ude1并发性/nz，/w使/v每个/r处理器/gi都/d得到/v充分/ad运行/gi。/w进程/gi和/cc线程/gi的/ude1关系/gi（/w1/nz）/w一个/mq线程/gi只能/v属于/v一个/mq进程/gi，/w而/cc一个/mq进程/gi可以/v有/vyou多/a个/q线程/gi，/w但/c至少/d有/vyou一个/mq线程/gi。/w（/w2/nz）/w资源分配/gi给/p进程/gi，/w同一/b进程/gi的/ude1所有/b线程/gi共享/gi该/rz进程/gi的/ude1所有/b资源/gi。/w（/w3/nz）/w处理机/gi分给/v线程/gi，/w即/v真正/d在/p处理/vn机上/s运行/gi的/ude1是/vshi线程/gi。/w（/w4/nz）/w线程/gi在/p执行/v过程/gi中/f，/w需要/v协作/gi同步/gi。/w不同/a进程/gi的/ude1线程/gi间/f要/v利用/v消息/n通信/gi的/ude1办法/gi实现/gi同步/gi。/w